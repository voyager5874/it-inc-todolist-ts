(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{108:function(e,t,a){e.exports=a.p+"static/media/page404png.bc53bdbc.png"},125:function(e,t,a){e.exports=a(155)},130:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),o=a.n(r),i=(a(130),a(16)),l=a(55);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,u=a(210),d=a(202),m=a(203),f=a(198),p=a(207),b=a(195),E=a(206),h=a(204),g=a(158),O=a(205),j=a(7),v=a(199),y=a(157),I=a(18),S=a(51),T=a(41),D=a(208),k=a(196),C=a(42);!function(e){e.APP_SET_STATUS="APP/SET-STATUS",e.APP_SET_ERROR="APP/SET-ERROR",e.APP_SET_INIT="APP/SET-INIT"}(s||(s={}));var w,A,P,L,N,x=function(e){return{type:s.APP_SET_ERROR,error:e}},R=function(e){return{type:s.APP_SET_STATUS,status:e}},_=function(e,t){e.messages.length?t(x(e.messages[0])):t(x("some error occurred")),t(R("failed"))},F=function(e,t){t(x(e.message)),t(R("failed"))},U=function(e){return e.trim()},B=["disabled"],M=C.a.div(w||(w=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  padding-bottom: 20px;\n"]))),K=Object(n.memo)((function(e){var t=e.disabled,a=void 0!==t&&t,r=Object(S.a)(e,B),o=Object(n.useState)(""),i=Object(I.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)(!1),d=Object(I.a)(u,2),m=d[0],f=d[1],p=function(){var e=U(l);e?r.addItemCallback(e):f(!0),s("")};return c.a.createElement(M,null,c.a.createElement(D.a,{disabled:a,label:m?"give it a name":"Title",size:"small",variant:"outlined",value:l,error:m,onChange:function(e){m&&f(!1),s(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&p()}}),c.a.createElement(b.a,{disabled:a,onClick:p},c.a.createElement(k.a,null)))})),H=a(194),z=a(197),V=a(104),G=a.n(V),J=["disabled"],W=Object(n.memo)((function(e){var t=e.disabled,a=void 0!==t&&t,r=Object(S.a)(e,J),o=Object(n.useState)(!1),i=Object(I.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)(""),d=Object(I.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),b=Object(I.a)(p,2),E=b[0],h=b[1],g=function(){var e=U(m);e?(s(!1),r.itemNameChangedCallback(e),f(r.itemName)):(f(""),h(!0))},O=Object(n.useCallback)((function(e){"Enter"===e.key&&g()}),[g]);return l?c.a.createElement(D.a,{error:Boolean(E),helperText:E,onKeyPress:O,autoFocus:!0,onBlur:g,value:m,onChange:function(e){h(!1),f(e.currentTarget.value)}}):c.a.createElement("span",{onDoubleClick:function(){a||(s(!0),f(r.itemName))}},r.itemName)})),q=a(212),Y=a(102),$=a.n(Y);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(A||(A={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgent=3]="Urgent",e[e.Someday=4]="Someday"}(P||(P={})),function(e){e[e.success=0]="success",e[e.error=1]="error",e[e.captcha=10]="captcha"}(L||(L={}));var Q,X,Z=C.a.div(N||(N=Object(T.a)(["\n  //min-width: 260px;\n  //border-bottom: 2px solid gray;\n"]))),ee=Object(n.memo)((function(e){var t=Object(n.useCallback)((function(t){var a=t.currentTarget.checked?A.Completed:A.New;e.changeStatus(e.taskID,a)}),[e.changeStatus,e.taskID]),a=Object(n.useCallback)((function(t){e.changeName(e.taskID,t)}),[e.changeName,e.taskID]),r=Object(n.useCallback)((function(){e.removeTask(e.taskID)}),[e.removeTask,e.taskID]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,null,c.a.createElement(q.a,{checked:e.isDone,color:"primary",onChange:t}),c.a.createElement(W,{itemName:e.taskName,itemNameChangedCallback:a})),c.a.createElement(b.a,{size:"small",onClick:r},c.a.createElement($.a,{color:"primary"})))})),te=a(103),ae=a.n(te).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"dd744663-c08a-476e-8a84-c072bf5b7a68"}}),ne=function(e,t){return ae.put("todo-lists/".concat(e),{title:t})},ce=function(e){return ae.delete("todo-lists/".concat(e))},re=function(e){return ae.post("todo-lists",{title:e})},oe=function(){return ae.get("todo-lists")},ie=function(e,t){return ae.post("todo-lists/".concat(e,"/tasks"),{title:t})},le=function(e){return ae.get("todo-lists/".concat(e,"/tasks"))},se=function(e,t,a){return ae.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},ue=function(e,t){return ae.delete("/todo-lists/".concat(e,"/tasks/").concat(t))},de=function(e){return ae.post("auth/login",e)},me=function(){return ae.delete("auth/login")},fe=function(){return ae.get("auth/me")},pe=function(e,t){return{type:"SET-LIST-STATUS",payload:{listID:e,entityStatus:t}}},be=a(38),Ee=a(71),he=a(8),ge={},Oe=function(e,t,a){return function(n,c){var r=c().tasks[e].find((function(e){return e.id===t}));if(r){var o=Object(he.a)({deadline:r.deadline,description:r.description,priority:r.priority,startDate:r.startDate,status:r.status,title:r.title},a);se(e,t,o).then((function(c){c.data.resultCode===L.success?n(function(e,t,a){return{type:"UPDATE-TASK-DATA",payload:{listID:e,taskID:t,newData:a}}}(e,t,a)):_(c.data,n)})).catch((function(e){n(x(e.message))}))}else console.warn("task with id ".concat(t," not found in todo list ").concat(e))}},je=function(e){return e.app.appStatus},ve=function(e){return e.app.isInitialized},ye=function(e){return e.auth.isLoggedIn},Ie=["demo","listStatus"],Se=C.a.div(Q||(Q=Object(T.a)(["\n  min-width: 300px;\n"]))),Te=C.a.div(X||(X=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-right: 0;\n"]))),De=Object(n.memo)((function(e){var t=e.demo,a=void 0!==t&&t,r=e.listStatus,o=Object(S.a)(e,Ie),l=Object(i.c)((function(e){return function(e,t){return e.tasks[t]}(e,o.todolistID)})),s=Object(i.c)(ye),u=Object(i.b)();Object(n.useEffect)((function(){var e;!a&&s&&u((e=o.todolistID,function(t){t(R("loading")),le(e).then((function(a){t(function(e,t){return{type:"SET-TASKS",payload:{todoListID:e,tasks:t}}}(e,a.data.items)),t(R("succeeded"))})).catch((function(e){F(e,t)}))}))}),[u,o.todolistID,a]);var d=l;"active"===o.activeFilter&&(d=l.filter((function(e){return e.status===A.New}))),"completed"===o.activeFilter&&(d=l.filter((function(e){return e.status===A.Completed})));var m=Object(n.useCallback)((function(e,t){u(Oe(o.todolistID,e,{status:t}))}),[u,o.todolistID]),p=Object(n.useCallback)((function(e){var t,a;u((t=o.todolistID,a=e,function(e){e(R("loading")),ie(t,a).then((function(a){a.data.resultCode===L.success?(e(function(e,t){return{type:"ADD-TASK",payload:{listID:e,task:t}}}(t,a.data.data.item)),e(R("succeeded"))):_(a.data,e)})).catch((function(t){F(t,e)}))}))}),[u,o.todolistID]),E=Object(n.useCallback)((function(e){u(function(e,t){return function(a){ue(e,t).then((function(n){a(function(e,t){return{type:"REMOVE-TASK",payload:{listID:e,taskID:t}}}(e,t))})).catch((function(e){F(e,a)}))}}(o.todolistID,e))}),[u,o.todolistID]),h=Object(n.useCallback)((function(e){u({type:"CHANGE-FILTER",payload:{listID:o.todolistID,activeFilter:e}})}),[u,o.todolistID]),g=Object(n.useCallback)((function(){var e,t=(e=o.todolistID,function(t){t(R("loading")),t(pe(e,"loading")),ce(e).then((function(a){a.data.resultCode===L.success?(t(function(e){return{type:"REMOVE-LIST",payload:{listID:e}}}(e)),t(R("succeeded")),t(pe(e,"idle"))):_(a.data,t)})).catch((function(e){F(e,t)}))});u(t)}),[u,o.todolistID]),O=Object(n.useCallback)((function(e,t){u(Oe(o.todolistID,e,{title:t}))}),[u,o.todolistID]),j=Object(n.useCallback)((function(e){u(function(e,t){return function(a){a(R("loading")),a(pe(e,"loading")),ne(e,t).then((function(n){n.data.resultCode===L.success?(a(function(e,t){return{type:"CHANGE-LIST-NAME",payload:{listID:e,newName:t}}}(e,t)),a(R("succeeded")),a(pe(e,"idle"))):_(n.data,a)})).catch((function(e){F(e,a)}))}}(o.todolistID,e))}),[u,o.todolistID]);return c.a.createElement(Se,null,c.a.createElement("h3",null,c.a.createElement(W,{itemName:o.title,itemNameChangedCallback:j}),c.a.createElement(b.a,{disabled:"loading"===r,onClick:g},c.a.createElement(G.a,null))),c.a.createElement(K,{disabled:"loading"===r,addItemCallback:p}),c.a.createElement(H.a,{disablePadding:!0},d.map((function(e){return c.a.createElement(z.a,{disableGutters:!0,key:e.id,style:{justifyContent:"space-between"}},c.a.createElement(ee,{taskID:e.id,isDone:e.status===A.Completed,changeName:O,taskName:e.title,changeStatus:m,removeTask:E}))}))),c.a.createElement(Te,null,c.a.createElement(f.a,{variant:"contained",color:"all"===o.activeFilter?"primary":"default",onClick:function(){return h("all")}},"All"),c.a.createElement(f.a,{variant:"contained",color:"active"===o.activeFilter?"primary":"default",onClick:function(){return h("active")}},"Active"),c.a.createElement(f.a,{variant:"contained",color:"completed"===o.activeFilter?"primary":"default",onClick:function(){return h("completed")}},"Completed")))})),ke=a(72),Ce=a(105),we={appStatus:"idle",error:null,isInitialized:!1},Ae=[],Pe={isLoggedIn:!1},Le=function(e){return{type:"login/SET-AUTH-STATE",isLoggedIn:e}},Ne=Object(ke.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-TASK":return Object(he.a)(Object(he.a)({},e),{},Object(be.a)({},t.payload.listID,[t.payload.task].concat(Object(Ee.a)(e[t.payload.listID]))));case"REMOVE-TASK":return Object(he.a)(Object(he.a)({},e),{},Object(be.a)({},t.payload.listID,e[t.payload.listID].filter((function(e){return e.id!==t.payload.taskID}))));case"UPDATE-TASK-DATA":return Object(he.a)(Object(he.a)({},e),{},Object(be.a)({},t.payload.listID,e[t.payload.listID].map((function(e){return e.id===t.payload.taskID?Object(he.a)(Object(he.a)({},e),t.payload.newData):e}))));case"REMOVE-LIST":var a=Object(he.a)({},e);return delete a[t.payload.listID],a;case"SET-TASKS":return Object(he.a)(Object(he.a)({},e),{},Object(be.a)({},t.payload.todoListID,t.payload.tasks));case"ADD-LIST":return Object(he.a)(Object(he.a)({},e),{},Object(be.a)({},t.payload.todoList.id,[]));case"SET-LISTS":var n=Object(he.a)({},e);return t.payload.lists.forEach((function(e){n[e.id]=[]})),n;default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-LIST":var a=Object(he.a)(Object(he.a)({},t.payload.todoList),{},{activeFilter:"all",entityStatus:"idle"});return[a].concat(Object(Ee.a)(e));case"REMOVE-LIST":return e.filter((function(e){return e.id!==t.payload.listID}));case"CHANGE-FILTER":return e.map((function(e){return e.id===t.payload.listID?Object(he.a)(Object(he.a)({},e),{},{activeFilter:t.payload.activeFilter}):e}));case"CHANGE-LIST-NAME":return e.map((function(e){return e.id===t.payload.listID?Object(he.a)(Object(he.a)({},e),{},{title:t.payload.newName}):e}));case"SET-LISTS":return t.payload.lists.map((function(e){return Object(he.a)(Object(he.a)({},e),{},{activeFilter:"all",entityStatus:"idle"})}));case"SET-LIST-STATUS":return e.map((function(e){return e.id===t.payload.listID?Object(he.a)(Object(he.a)({},e),{},{entityStatus:t.payload.entityStatus}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.APP_SET_STATUS:return Object(he.a)(Object(he.a)({},e),{},{appStatus:t.status});case s.APP_SET_ERROR:return Object(he.a)(Object(he.a)({},e),{},{error:t.error});case s.APP_SET_INIT:return Object(he.a)(Object(he.a)({},e),{},{isInitialized:t.isInitialized});default:return Object(he.a)({},e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-AUTH-STATE":return Object(he.a)(Object(he.a)({},e),{},{isLoggedIn:t.isLoggedIn});default:return e}}}),xe=Object(ke.c)(Ne,Object(ke.a)(Ce.a)),Re=i.c;window.store=xe;var _e=Object(n.memo)((function(e){var t=e.demo,a=void 0!==t&&t,r=Re((function(e){return e.lists})),o=Object(i.c)(ye),l=Object(i.b)();Object(n.useEffect)((function(){!a&&o&&l((function(e){e(R("loading")),oe().then((function(t){e({type:"SET-LISTS",payload:{lists:t.data}}),e(R("succeeded"))})).catch((function(t){F(t,e)}))}))}),[]);var s=Object(n.useCallback)((function(e){var t;e&&l((t=e,function(e){e(R("loading")),re(t).then((function(t){t.data.resultCode===L.success?(e({type:"ADD-LIST",payload:{todoList:t.data.data.item}}),e(R("succeeded"))):_(t.data,e)})).catch((function(t){F(t,e)}))}))}),[l]);return o?c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{container:!0,style:{paddingTop:"20px"}},c.a.createElement(K,{addItemCallback:s})),c.a.createElement(v.a,{container:!0,spacing:3},r.map((function(e){return c.a.createElement(v.a,{item:!0,key:e.id},c.a.createElement(y.a,{style:{padding:"20px"},elevation:10},c.a.createElement(De,{demo:a,listStatus:e.entityStatus,todolistID:e.id,title:e.title,activeFilter:e.activeFilter})))})))):c.a.createElement(j.a,{replace:!0,to:"/login"})})),Fe=a(214),Ue=a(211),Be=function(e){return c.a.createElement(Ue.a,Object.assign({elevation:6,variant:"filled"},e))},Me=function(){var e=Re((function(e){return e.app.error})),t=null!==e,a=Object(i.b)(),n=function(e,t){"clickaway"!==t&&a(x(null))};return c.a.createElement(Fe.a,{open:t,autoHideDuration:5e3,onClose:n},c.a.createElement(Be,{onClose:n,severity:"error"},e&&e))},Ke=a(192),He=a(193),ze=a(200),Ve=a(201),Ge=a(109),Je=function(){var e=Object(n.useState)(!1),t=Object(I.a)(e,2),a=t[0],r=t[1],o=Re(ye),l=Object(i.b)(),s=Object(Ge.a)({validate:function(e){return e.email?e.password.length<4?{password:"password is too short"}:e.password?void 0:{password:"password required"}:{email:"email required"}},initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},onSubmit:function(e){var t;l((t=e,function(e){e(R("loading")),de(t).then((function(t){t.data.resultCode===L.success?(e(Le(!0)),e(R("succeeded"))):_(t.data,e)})).catch((function(t){F(t,e)}))}))}});return o?c.a.createElement(j.a,{replace:!0,to:"/"}):c.a.createElement(v.a,{container:!0,justify:"center"},c.a.createElement(v.a,{item:!0,xs:4},c.a.createElement("form",{onSubmit:s.handleSubmit},c.a.createElement(Ke.a,null,c.a.createElement(He.a,{style:{marginTop:"20vh",minWidth:"300px",textAlign:"center"}},c.a.createElement("p",null,"sign up on ",c.a.createElement("a",{href:"https://social-network.samuraijs.com/"},"samuraiJS")),c.a.createElement("p",null,"or use the default credentials")),c.a.createElement(ze.a,null,c.a.createElement(D.a,{label:"Email",name:"email",margin:"normal",type:"email",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email,error:s.touched.email&&Boolean(s.errors.email),helperText:s.errors.email}),c.a.createElement(D.a,{label:"Password",name:"password",margin:"normal",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password,type:a?"":"password",error:s.touched.password&&Boolean(s.errors.password),helperText:s.errors.password}),c.a.createElement(Ve.a,{control:c.a.createElement(q.a,{name:"rememberMe",onChange:s.handleChange,checked:s.values.rememberMe}),label:"remember me"}),c.a.createElement(Ve.a,{control:c.a.createElement(q.a,{checked:a,onChange:function(){r(!a)}}),label:"show password"}),c.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary",disabled:Boolean(s.errors.password)||Boolean(s.errors.email)},"Login"))))))},We=a(108),qe=a.n(We),Ye=function(){return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"90vh"}},c.a.createElement("img",{src:qe.a,alt:"404"}))},$e=function(){return function(e){fe().then((function(t){var a;t.data.resultCode===L.success?(e(Le(!0)),e(R("succeeded"))):_(t.data,e),e((a=!0,{type:s.APP_SET_INIT,isInitialized:a}))})).catch((function(t){F(t,e)}))}},Qe=function(e){var t=e.demo,a=void 0!==t&&t,r=Object(i.c)(je),o=Object(i.c)(ve),l=Object(i.c)(ye),s=Object(j.g)(),v=Object(i.b)();if(Object(n.useEffect)((function(){v($e())}),[]),!o)return c.a.createElement(u.a,{sx:{display:"flex",justifyContent:"center",marginTop:"50vh"}},c.a.createElement(d.a,null));var y="loading"===r;return c.a.createElement("div",null,c.a.createElement(Me,null),c.a.createElement(m.a,{position:"static"},c.a.createElement(h.a,null,c.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(O.a,null)),c.a.createElement(g.a,{variant:"h6"},"Todolist"),l&&c.a.createElement(f.a,{color:"inherit",variant:"outlined",onClick:function(){v((function(e){me().then((function(t){t.data.resultCode===L.success?e(Le(!1)):_(t.data,e)})).catch((function(t){F(t,e)}))})),s("/login")},style:{marginLeft:"50px"}},"Log out")),y&&c.a.createElement(E.a,{color:"secondary"})),c.a.createElement(p.a,{fixed:!0},c.a.createElement(j.d,null,c.a.createElement(j.b,{path:"/it-inc-todolist-ts",element:c.a.createElement(_e,{demo:a})}),c.a.createElement(j.b,{path:"/",element:c.a.createElement(_e,{demo:a})}),c.a.createElement(j.b,{path:"/login",element:c.a.createElement(Je,null)}),c.a.createElement(j.b,{path:"404",element:c.a.createElement(Ye,null)}),c.a.createElement(j.b,{path:"*",element:c.a.createElement(j.a,{to:"404"})}))))};o.a.render(c.a.createElement(i.a,{store:xe},c.a.createElement(l.a,null,c.a.createElement(Qe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.0925c61a.chunk.js.map