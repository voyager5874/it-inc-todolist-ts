(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(t,e,a){t.exports=a(129)},105:function(t,e,a){},129:function(t,e,a){"use strict";a.r(e);var n,c,o,i,l=a(0),r=a.n(l),s=a(9),u=a.n(s),d=(a(105),a(27)),m=a(37),b=a(32),f=a(184),p=a(173),E=a(174),O=a(33),v=["disabled"],y=O.a.div(n||(n=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  padding-bottom: 20px;\n"]))),j=r.a.memo((function(t){var e=t.disabled,a=void 0!==e&&e,n=Object(d.a)(t,v);console.log('AddItemForm with "'.concat(n.addItemCallback.toString(),'" callback was called'));var c=Object(l.useState)(""),o=Object(m.a)(c,2),i=o[0],s=o[1],u=Object(l.useState)(!1),b=Object(m.a)(u,2),O=b[0],j=b[1],k=Object(l.useCallback)((function(){var t=i.trim();t?n.addItemCallback(t):j(!0),s("")}),[i,n.addItemCallback]),S=Object(l.useCallback)((function(t){"Enter"===t.key&&k()}),[k]);return r.a.createElement(y,null,r.a.createElement(f.a,{disabled:a,label:O?"give it a name":"Title",size:"small",variant:"outlined",value:i,error:O,onChange:function(t){O&&j(!1),s(t.currentTarget.value)},onKeyPress:S}),r.a.createElement(p.a,{disabled:a,onClick:k},r.a.createElement(E.a,null)))})),k=a(177),S=a(176),I=a(183),D=a(130),g=a(178),h=a(182),T=a(180),C=a(181),A=a(179),w=a(57),N=a(8),P=a(86),L=a.n(P).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"dd744663-c08a-476e-8a84-c072bf5b7a68"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgent=3]="Urgent",t[t.Someday=4]="Someday"}(o||(o={})),function(t){t[t.success=0]="success",t[t.error=1]="error",t[t.captcha=10]="captcha"}(i||(i={}));var R,F=function(t,e){return L.put("todo-lists/".concat(t),{title:e})},x=function(t){return L.delete("todo-lists/".concat(t))},_=function(t){return L.post("todo-lists",{title:t})},K=function(){return L.get("todo-lists")},U=function(t,e){return L.post("todo-lists/".concat(t,"/tasks"),{title:e})},M=function(t){return L.get("todo-lists/".concat(t,"/tasks"))},H=function(t,e,a){return L.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},G=function(t,e){return L.delete("/todo-lists/".concat(t,"/tasks/").concat(e))};!function(t){t.APP_SET_STATUS="APP/SET-STATUS",t.APP_SET_ERROR="APP/SET-ERROR"}(R||(R={}));var V={appStatus:"idle",error:null},B=function(t){return{type:R.APP_SET_ERROR,error:t}},z=function(t){return{type:R.APP_SET_STATUS,status:t}},J=function(t,e){t.messages.length?e(B(t.messages[0])):e(B("some error occurred")),e(z("failed"))},W=function(t,e){e(B(t.message)),e(z("failed"))},Y=[],$=function(t,e){return{type:"SET-LIST-STATUS",payload:{listID:t,entityStatus:e}}},q=a(18),Q=a(36),X={},Z=function(t,e,a){return function(n,c){var o=c().tasks[t].find((function(t){return t.id===e}));if(o){var l=Object(N.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,status:o.status,title:o.title},a);H(t,e,l).then((function(c){c.data.resultCode===i.success?n(function(t,e,a){return{type:"UPDATE-TASK-DATA",payload:{listID:t,taskID:e,newData:a}}}(t,e,a)):J(c.data,n)})).catch((function(t){n(B(t.message))}))}else console.warn("task with id ".concat(e," not found in todo list ").concat(t))}},tt=a(58),et=a(87),at=Object(tt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-TASK":return Object(N.a)(Object(N.a)({},t),{},Object(Q.a)({},e.payload.listID,[e.payload.task].concat(Object(w.a)(t[e.payload.listID]))));case"REMOVE-TASK":return Object(N.a)(Object(N.a)({},t),{},Object(Q.a)({},e.payload.listID,t[e.payload.listID].filter((function(t){return t.id!==e.payload.taskID}))));case"UPDATE-TASK-DATA":return Object(N.a)(Object(N.a)({},t),{},Object(Q.a)({},e.payload.listID,t[e.payload.listID].map((function(t){return t.id===e.payload.taskID?Object(N.a)(Object(N.a)({},t),e.payload.newData):t}))));case"REMOVE-LIST":var a=Object(N.a)({},t);return delete a[e.payload.listID],a;case"SET-TASKS":return Object(N.a)(Object(N.a)({},t),{},Object(Q.a)({},e.payload.todoListID,e.payload.tasks));default:return t}},lists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-LIST":var a=Object(N.a)(Object(N.a)({},e.payload.todoList),{},{activeFilter:"all",entityStatus:"idle"});return[a].concat(Object(w.a)(t));case"REMOVE-LIST":return t.filter((function(t){return t.id!==e.payload.listID}));case"CHANGE-FILTER":return t.map((function(t){return t.id===e.payload.listID?Object(N.a)(Object(N.a)({},t),{},{activeFilter:e.payload.activeFilter}):t}));case"CHANGE-LIST-NAME":return t.map((function(t){return t.id===e.payload.listID?Object(N.a)(Object(N.a)({},t),{},{title:e.payload.newName}):t}));case"SET-LISTS":return e.payload.lists.map((function(t){return Object(N.a)(Object(N.a)({},t),{},{activeFilter:"all",entityStatus:"idle"})}));case"SET-LIST-STATUS":return t.map((function(t){return t.id===e.payload.listID?Object(N.a)(Object(N.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R.APP_SET_STATUS:return Object(N.a)(Object(N.a)({},t),{},{appStatus:e.status});case R.APP_SET_ERROR:return Object(N.a)(Object(N.a)({},t),{},{error:e.error});default:return Object(N.a)({},t)}}}),nt=Object(tt.c)(at,Object(tt.a)(et.a)),ct=q.c;window.store=nt;var ot,it,lt,rt=["disabled"],st=r.a.memo((function(t){var e=t.disabled,a=void 0!==e&&e,n=Object(d.a)(t,rt);console.log("editableSpan was called, text: ".concat(n.itemName));var c=Object(l.useState)(!1),o=Object(m.a)(c,2),i=o[0],s=o[1],u=Object(l.useState)(""),b=Object(m.a)(u,2),p=b[0],E=b[1],O=Object(l.useState)(!1),v=Object(m.a)(O,2),y=v[0],j=v[1],k=Object(l.useCallback)((function(t){j(!1),E(t.currentTarget.value)}),[]),S=Object(l.useCallback)((function(){var t=p.trim();t?(s(!1),n.itemNameChangedCallback(t),E(n.itemName)):(E(""),j(!0))}),[p]),I=Object(l.useCallback)((function(t){"Enter"===t.key&&S()}),[S]);return i?r.a.createElement(f.a,{error:Boolean(y),helperText:y,onKeyPress:I,autoFocus:!0,onBlur:S,value:p,onChange:k}):r.a.createElement("span",{onDoubleClick:function(){a||(s(!0),E(n.itemName))}},n.itemName)})),ut=a(175),dt=a(172),mt=a(89),bt=a.n(mt),ft=a(186),pt=a(88),Et=a.n(pt),Ot=r.a.memo((function(t){console.log("Task was called, title: ".concat(t.taskName));var e=Object(l.useCallback)((function(e){var a=e.currentTarget.checked?c.Completed:c.New;t.changeStatus(t.taskID,a)}),[t.changeStatus,t.taskID]),a=Object(l.useCallback)((function(e){t.changeName(t.taskID,e)}),[t.changeName,t.taskID]),n=Object(l.useCallback)((function(){t.removeTask(t.taskID)}),[t.removeTask,t.taskID]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,null,r.a.createElement(ft.a,{checked:t.isDone,color:"primary",onChange:e}),r.a.createElement(st,{itemName:t.taskName,itemNameChangedCallback:a})),r.a.createElement(p.a,{size:"small",onClick:n},r.a.createElement(Et.a,{color:"primary"})))})),vt=O.a.div(ot||(ot=Object(b.a)(["\n  //min-width: 260px;\n  //border-bottom: 2px solid gray;\n"]))),yt=["demo","listStatus"],jt=O.a.div(it||(it=Object(b.a)(["\n  min-width: 300px;\n"]))),kt=O.a.div(lt||(lt=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-right: 0;\n"]))),St=r.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,n=t.listStatus,o=Object(d.a)(t,yt);console.log("todolist was called, title: ".concat(o.title));var s=Object(q.c)((function(t){return t.tasks[o.todolistID]})),u=Object(q.b)();Object(l.useEffect)((function(){var t;a||u((t=o.todolistID,function(e){e(z("loading")),M(t).then((function(a){e(function(t,e){return{type:"SET-TASKS",payload:{todoListID:t,tasks:e}}}(t,a.data.items)),e(z("succeeded"))})).catch((function(t){W(t,e)}))}))}),[u,o.todolistID]);var m=s;"active"===o.activeFilter&&(m=s.filter((function(t){return t.status===c.New}))),"completed"===o.activeFilter&&(m=s.filter((function(t){return t.status===c.Completed})));var b=Object(l.useCallback)((function(t,e){u(Z(o.todolistID,t,{status:e}))}),[u,o.todolistID]),f=Object(l.useCallback)((function(t){var e,a;u((e=o.todolistID,a=t,function(t){t(z("loading")),U(e,a).then((function(a){a.data.resultCode===i.success?(t(function(t,e){return{type:"ADD-TASK",payload:{listID:t,task:e}}}(e,a.data.data.item)),t(z("succeeded"))):J(a.data,t)})).catch((function(e){W(e,t)}))}))}),[u,o.todolistID]),E=Object(l.useCallback)((function(t){u(function(t,e){return function(a){G(t,e).then((function(n){a(function(t,e){return{type:"REMOVE-TASK",payload:{listID:t,taskID:e}}}(t,e))})).catch((function(t){W(t,a)}))}}(o.todolistID,t))}),[u,o.todolistID]),O=Object(l.useCallback)((function(t){u({type:"CHANGE-FILTER",payload:{listID:o.todolistID,activeFilter:t}})}),[u,o.todolistID]),v=Object(l.useCallback)((function(){var t,e=(t=o.todolistID,function(e){e(z("loading")),e($(t,"loading")),x(t).then((function(a){a.data.resultCode===i.success?(e(function(t){return{type:"REMOVE-LIST",payload:{listID:t}}}(t)),e(z("succeeded")),e($(t,"idle"))):J(a.data,e)})).catch((function(t){W(t,e)}))});u(e)}),[u,o.todolistID]),y=Object(l.useCallback)((function(t,e){u(Z(o.todolistID,t,{title:e}))}),[u,o.todolistID]),k=Object(l.useCallback)((function(t){u(function(t,e){return function(a){a(z("loading")),a($(t,"loading")),F(t,e).then((function(n){n.data.resultCode===i.success?(a(function(t,e){return{type:"CHANGE-LIST-NAME",payload:{listID:t,newName:e}}}(t,e)),a(z("succeeded")),a($(t,"idle"))):J(n.data,a)})).catch((function(t){W(t,a)}))}}(o.todolistID,t))}),[u,o.todolistID]);return r.a.createElement(jt,null,r.a.createElement("h3",null,r.a.createElement(st,{itemName:o.title,itemNameChangedCallback:k}),r.a.createElement(p.a,{disabled:"loading"===n,onClick:v},r.a.createElement(bt.a,null))),r.a.createElement(j,{disabled:"loading"===n,addItemCallback:f}),r.a.createElement(dt.a,{disablePadding:!0},(m||[]).map((function(t){return r.a.createElement(ut.a,{disableGutters:!0,key:t.id,style:{justifyContent:"space-between"}},r.a.createElement(Ot,{taskID:t.id,isDone:t.status===c.Completed,changeName:y,taskName:t.title,changeStatus:b,removeTask:E}))}))),r.a.createElement(kt,null,r.a.createElement(S.a,{variant:"contained",color:"all"===o.activeFilter?"primary":"default",onClick:function(){return O("all")}},"All"),r.a.createElement(S.a,{variant:"contained",color:"active"===o.activeFilter?"primary":"default",onClick:function(){return O("active")}},"Active"),r.a.createElement(S.a,{variant:"contained",color:"completed"===o.activeFilter?"primary":"default",onClick:function(){return O("completed")}},"Completed")))})),It=a(188),Dt=a(185);function gt(t){return r.a.createElement(Dt.a,Object.assign({elevation:6,variant:"filled"},t))}var ht=function(){var t=ct((function(t){return t.app.error})),e=null!==t,a=Object(q.b)(),n=function(t,e){"clickaway"!==e&&a(B(null))};return r.a.createElement(It.a,{open:e,autoHideDuration:5e3,onClose:n},r.a.createElement(gt,{onClose:n,severity:"error"},t&&t))},Tt=["demo"],Ct=function(t){var e=t.demo,a=void 0!==e&&e;Object(d.a)(t,Tt);console.log("app was called");var n=ct((function(t){return t.lists})),c=Object(q.c)((function(t){return t.app.appStatus})),o=Object(q.b)();Object(l.useEffect)((function(){a||o((function(t){t(z("loading")),K().then((function(e){t({type:"SET-LISTS",payload:{lists:e.data}}),t(z("succeeded"))})).catch((function(e){W(e,t)}))}))}),[o,a]);var s=Object(l.useCallback)((function(t){var e;t&&o((e=t,function(t){t(z("loading")),_(e).then((function(e){e.data.resultCode===i.success?(t({type:"ADD-LIST",payload:{todoList:e.data.data.item}}),t(z("succeeded"))):J(e.data,t)})).catch((function(e){W(e,t)}))}))}),[o]);return r.a.createElement("div",null,r.a.createElement(ht,null),r.a.createElement(k.a,{position:"static"},r.a.createElement(g.a,{style:{justifyContent:"space-between"}},r.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(A.a,null)),r.a.createElement(T.a,{variant:"h6"},"Todolists"),r.a.createElement(S.a,{color:"inherit",variant:"outlined"},"Login")),"loading"===c&&r.a.createElement(C.a,{style:{position:"absolute",top:"800px"},color:"secondary"})),r.a.createElement(h.a,{fixed:!0},r.a.createElement(I.a,{container:!0,style:{paddingTop:"20px"}},r.a.createElement(j,{addItemCallback:s})),r.a.createElement(I.a,{container:!0,spacing:3},n.map((function(t){return r.a.createElement(I.a,{item:!0,key:t.id},r.a.createElement(D.a,{style:{padding:"20px"},elevation:10},r.a.createElement(St,{demo:a,listStatus:t.entityStatus,todolistID:t.id,title:t.title,activeFilter:t.activeFilter})))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(q.a,{store:nt},r.a.createElement(Ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.15813518.chunk.js.map