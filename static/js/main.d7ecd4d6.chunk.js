(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{119:function(e,t,a){e.exports=a(149)},124:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n,c,i,o=a(0),r=a.n(o),l=a(10),s=a.n(l),u=(a(124),a(17)),d=a(62),m=a(199),f=a(195),p=a(203),b=a(192),E=a(202),O=a(200),j=a(151),v=a(201),g=a(7),y=a(196),S=a(150),I=a(68),T=a(8),h=a(92),D=a.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":Object({NODE_ENV:"production",PUBLIC_URL:"/it-inc-todolist-ts",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_URL:"https://social-network.samuraijs.com/api/1.1/"}).REACT_APP_API_KEY}}),k=function(e,t){return D.put("todo-lists/".concat(e),{title:t})},C=function(e){return D.delete("todo-lists/".concat(e))},A=function(e){return D.post("todo-lists",{title:e})},w=function(){return D.get("todo-lists")},P=function(e,t){return D.post("todo-lists/".concat(e,"/tasks"),{title:t})},L=function(e){return D.get("todo-lists/".concat(e,"/tasks"))},N=function(e,t,a){return D.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},_=function(e,t){return D.delete("/todo-lists/".concat(e,"/tasks/").concat(t))},R=function(e){return D.post("auth/login",e)};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(n||(n={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgent=3]="Urgent",e[e.Someday=4]="Someday"}(c||(c={})),function(e){e[e.success=0]="success",e[e.error=1]="error",e[e.captcha=10]="captcha"}(i||(i={}));var F,U=function(e,t){e.messages.length?t(M(e.messages[0])):t(M("some error occurred")),t(H("failed"))},K=function(e,t){t(M(e.message)),t(H("failed"))};!function(e){e.APP_SET_STATUS="APP/SET-STATUS",e.APP_SET_ERROR="APP/SET-ERROR",e.APP_SET_INIT="APP/SET-INIT"}(F||(F={}));var x={appStatus:"idle",error:null,isInitialized:!1},M=function(e){return{type:F.APP_SET_ERROR,error:e}},H=function(e){return{type:F.APP_SET_STATUS,status:e}},B=[],V=function(e,t){return{type:"SET-LIST-STATUS",payload:{listID:e,entityStatus:t}}},z=a(44),G={},W=function(e,t,a){return function(n,c){var o=c().tasks[e].find((function(e){return e.id===t}));if(o){var r=Object(T.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,status:o.status,title:o.title},a);N(e,t,r).then((function(c){c.data.resultCode===i.success?n(function(e,t,a){return{type:"UPDATE-TASK-DATA",payload:{listID:e,taskID:t,newData:a}}}(e,t,a)):U(c.data,n)})).catch((function(e){n(M(e.message))}))}else console.warn("task with id ".concat(t," not found in todo list ").concat(e))}},J=a(69),q=a(93),Y={isLoggedIn:!1},$=Object(J.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-TASK":return Object(T.a)(Object(T.a)({},e),{},Object(z.a)({},t.payload.listID,[t.payload.task].concat(Object(I.a)(e[t.payload.listID]))));case"REMOVE-TASK":return Object(T.a)(Object(T.a)({},e),{},Object(z.a)({},t.payload.listID,e[t.payload.listID].filter((function(e){return e.id!==t.payload.taskID}))));case"UPDATE-TASK-DATA":return Object(T.a)(Object(T.a)({},e),{},Object(z.a)({},t.payload.listID,e[t.payload.listID].map((function(e){return e.id===t.payload.taskID?Object(T.a)(Object(T.a)({},e),t.payload.newData):e}))));case"REMOVE-LIST":var a=Object(T.a)({},e);return delete a[t.payload.listID],a;case"SET-TASKS":return Object(T.a)(Object(T.a)({},e),{},Object(z.a)({},t.payload.todoListID,t.payload.tasks));default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-LIST":var a=Object(T.a)(Object(T.a)({},t.payload.todoList),{},{activeFilter:"all",entityStatus:"idle"});return[a].concat(Object(I.a)(e));case"REMOVE-LIST":return e.filter((function(e){return e.id!==t.payload.listID}));case"CHANGE-FILTER":return e.map((function(e){return e.id===t.payload.listID?Object(T.a)(Object(T.a)({},e),{},{activeFilter:t.payload.activeFilter}):e}));case"CHANGE-LIST-NAME":return e.map((function(e){return e.id===t.payload.listID?Object(T.a)(Object(T.a)({},e),{},{title:t.payload.newName}):e}));case"SET-LISTS":return t.payload.lists.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{activeFilter:"all",entityStatus:"idle"})}));case"SET-LIST-STATUS":return e.map((function(e){return e.id===t.payload.listID?Object(T.a)(Object(T.a)({},e),{},{entityStatus:t.payload.entityStatus}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.APP_SET_STATUS:return Object(T.a)(Object(T.a)({},e),{},{appStatus:t.status});case F.APP_SET_ERROR:return Object(T.a)(Object(T.a)({},e),{},{error:t.error});case F.APP_SET_INIT:return Object(T.a)(Object(T.a)({},e),{},{isInitialized:t.isInitialized});default:return Object(T.a)({},e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loginReducer/SET-AUTH-STATE":return Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:t.isLoggedIn});default:return e}}}),Q=Object(J.c)($,Object(J.a)(q.a)),X=u.c;window.store=Q;var Z,ee,te,ae,ne=a(20),ce=a(49),ie=a(39),oe=a(204),re=a(193),le=a(40),se=["disabled"],ue=le.a.div(Z||(Z=Object(ie.a)(["\n  display: flex;\n  align-items: center;\n  padding-bottom: 20px;\n"]))),de=Object(o.memo)((function(e){var t=e.disabled,a=void 0!==t&&t,n=Object(ce.a)(e,se),c=Object(o.useState)(""),i=Object(ne.a)(c,2),l=i[0],s=i[1],u=Object(o.useState)(!1),d=Object(ne.a)(u,2),m=d[0],f=d[1],p=function(){l?n.addItemCallback(l):f(!0),s("")};return r.a.createElement(ue,null,r.a.createElement(oe.a,{disabled:a,label:m?"give it a name":"Title",size:"small",variant:"outlined",value:l,error:m,onChange:function(e){m&&f(!1),s(e.currentTarget.value.trim())},onKeyPress:function(e){"Enter"===e.key&&p()}}),r.a.createElement(b.a,{disabled:a,onClick:p},r.a.createElement(re.a,null)))})),me=a(191),fe=a(194),pe=a(102),be=a.n(pe),Ee=["disabled"],Oe=Object(o.memo)((function(e){var t=e.disabled,a=void 0!==t&&t,n=Object(ce.a)(e,Ee),c=Object(o.useState)(!1),i=Object(ne.a)(c,2),l=i[0],s=i[1],u=Object(o.useState)(""),d=Object(ne.a)(u,2),m=d[0],f=d[1],p=Object(o.useState)(!1),b=Object(ne.a)(p,2),E=b[0],O=b[1],j=function(){var e=m.trim();e?(s(!1),n.itemNameChangedCallback(e),f(n.itemName)):(f(""),O(!0))},v=Object(o.useCallback)((function(e){"Enter"===e.key&&j()}),[j]);return l?r.a.createElement(oe.a,{error:Boolean(E),helperText:E,onKeyPress:v,autoFocus:!0,onBlur:j,value:m,onChange:function(e){O(!1),f(e.currentTarget.value)}}):r.a.createElement("span",{onDoubleClick:function(){a||(s(!0),f(n.itemName))}},n.itemName)})),je=a(206),ve=a(101),ge=a.n(ve),ye=le.a.div(ee||(ee=Object(ie.a)(["\n  //min-width: 260px;\n  //border-bottom: 2px solid gray;\n"]))),Se=Object(o.memo)((function(e){var t=Object(o.useCallback)((function(t){var a=t.currentTarget.checked?n.Completed:n.New;e.changeStatus(e.taskID,a)}),[e.changeStatus,e.taskID]),a=Object(o.useCallback)((function(t){e.changeName(e.taskID,t)}),[e.changeName,e.taskID]),c=Object(o.useCallback)((function(){e.removeTask(e.taskID)}),[e.removeTask,e.taskID]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null,r.a.createElement(je.a,{checked:e.isDone,color:"primary",onChange:t}),r.a.createElement(Oe,{itemName:e.taskName,itemNameChangedCallback:a})),r.a.createElement(b.a,{size:"small",onClick:c},r.a.createElement(ge.a,{color:"primary"})))})),Ie=["demo","listStatus"],Te=le.a.div(te||(te=Object(ie.a)(["\n  min-width: 300px;\n"]))),he=le.a.div(ae||(ae=Object(ie.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-right: 0;\n"]))),De=Object(o.memo)((function(e){var t=e.demo,a=void 0!==t&&t,c=e.listStatus,l=Object(ce.a)(e,Ie),s=X((function(e){return e.tasks[l.todolistID]})),d=Object(u.b)();Object(o.useEffect)((function(){var e;a||d((e=l.todolistID,function(t){t(H("loading")),L(e).then((function(a){t(function(e,t){return{type:"SET-TASKS",payload:{todoListID:e,tasks:t}}}(e,a.data.items)),t(H("succeeded"))})).catch((function(e){K(e,t)}))}))}),[d,l.todolistID,a]);var m=s;"active"===l.activeFilter&&(m=s.filter((function(e){return e.status===n.New}))),"completed"===l.activeFilter&&(m=s.filter((function(e){return e.status===n.Completed})));var p=Object(o.useCallback)((function(e,t){d(W(l.todolistID,e,{status:t}))}),[d,l.todolistID]),E=Object(o.useCallback)((function(e){var t,a;d((t=l.todolistID,a=e,function(e){e(H("loading")),P(t,a).then((function(a){a.data.resultCode===i.success?(e(function(e,t){return{type:"ADD-TASK",payload:{listID:e,task:t}}}(t,a.data.data.item)),e(H("succeeded"))):U(a.data,e)})).catch((function(t){K(t,e)}))}))}),[d,l.todolistID]),O=Object(o.useCallback)((function(e){d(function(e,t){return function(a){_(e,t).then((function(n){a(function(e,t){return{type:"REMOVE-TASK",payload:{listID:e,taskID:t}}}(e,t))})).catch((function(e){K(e,a)}))}}(l.todolistID,e))}),[d,l.todolistID]),j=Object(o.useCallback)((function(e){d({type:"CHANGE-FILTER",payload:{listID:l.todolistID,activeFilter:e}})}),[d,l.todolistID]),v=Object(o.useCallback)((function(){var e,t=(e=l.todolistID,function(t){t(H("loading")),t(V(e,"loading")),C(e).then((function(a){a.data.resultCode===i.success?(t(function(e){return{type:"REMOVE-LIST",payload:{listID:e}}}(e)),t(H("succeeded")),t(V(e,"idle"))):U(a.data,t)})).catch((function(e){K(e,t)}))});d(t)}),[d,l.todolistID]),g=Object(o.useCallback)((function(e,t){d(W(l.todolistID,e,{title:t}))}),[d,l.todolistID]),y=Object(o.useCallback)((function(e){d(function(e,t){return function(a){a(H("loading")),a(V(e,"loading")),k(e,t).then((function(n){n.data.resultCode===i.success?(a(function(e,t){return{type:"CHANGE-LIST-NAME",payload:{listID:e,newName:t}}}(e,t)),a(H("succeeded")),a(V(e,"idle"))):U(n.data,a)})).catch((function(e){K(e,a)}))}}(l.todolistID,e))}),[d,l.todolistID]);return r.a.createElement(Te,null,r.a.createElement("h3",null,r.a.createElement(Oe,{itemName:l.title,itemNameChangedCallback:y}),r.a.createElement(b.a,{disabled:"loading"===c,onClick:v},r.a.createElement(be.a,null))),r.a.createElement(de,{disabled:"loading"===c,addItemCallback:E}),r.a.createElement(me.a,{disablePadding:!0},(m||[]).map((function(e){return r.a.createElement(fe.a,{disableGutters:!0,key:e.id,style:{justifyContent:"space-between"}},r.a.createElement(Se,{taskID:e.id,isDone:e.status===n.Completed,changeName:g,taskName:e.title,changeStatus:p,removeTask:O}))}))),r.a.createElement(he,null,r.a.createElement(f.a,{variant:"contained",color:"all"===l.activeFilter?"primary":"default",onClick:function(){return j("all")}},"All"),r.a.createElement(f.a,{variant:"contained",color:"active"===l.activeFilter?"primary":"default",onClick:function(){return j("active")}},"Active"),r.a.createElement(f.a,{variant:"contained",color:"completed"===l.activeFilter?"primary":"default",onClick:function(){return j("completed")}},"Completed")))})),ke=Object(o.memo)((function(e){var t=e.demo,a=void 0!==t&&t,n=X((function(e){return e.lists})),c=Object(u.b)(),l=Object(o.useCallback)((function(e){var t;e&&c((t=e,function(e){e(H("loading")),A(t).then((function(t){t.data.resultCode===i.success?(e({type:"ADD-LIST",payload:{todoList:t.data.data.item}}),e(H("succeeded"))):U(t.data,e)})).catch((function(t){K(t,e)}))}))}),[c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{container:!0,style:{paddingTop:"20px"}},r.a.createElement(de,{addItemCallback:l})),r.a.createElement(y.a,{container:!0,spacing:3},n.map((function(e){return r.a.createElement(y.a,{item:!0,key:e.id},r.a.createElement(S.a,{style:{padding:"20px"},elevation:10},r.a.createElement(De,{demo:a,listStatus:e.entityStatus,todolistID:e.id,title:e.title,activeFilter:e.activeFilter})))}))))})),Ce=a(208),Ae=a(205),we=function(e){return r.a.createElement(Ae.a,Object.assign({elevation:6,variant:"filled"},e))},Pe=function(){var e=X((function(e){return e.app.error})),t=null!==e,a=Object(u.b)(),n=function(e,t){"clickaway"!==t&&a(M(null))};return r.a.createElement(Ce.a,{open:t,autoHideDuration:5e3,onClose:n},r.a.createElement(we,{onClose:n,severity:"error"},e&&e))},Le=a(189),Ne=a(190),_e=a(197),Re=a(198),Fe=a(105),Ue=function(){var e=Object(u.b)(),t=(Object(g.f)(),X((function(e){return e.auth.isLoggedIn})),Object(Fe.a)({validate:function(e){return e.email?e.password?void 0:{password:"password required"}:{email:"email required"}},initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},onSubmit:function(t){var a;e((a=t,function(e){e(H("loading")),R(a).then((function(t){t.data.resultCode===i.success?(e({type:"loginReducer/SET-AUTH-STATE",isLoggedIn:!0}),e(H("succeeded"))):U(t.data,e)})).catch((function(t){K(t,e)}))}))}}));return r.a.createElement(y.a,{container:!0,justify:"center"},r.a.createElement(y.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:t.handleSubmit},r.a.createElement(Le.a,null,r.a.createElement(Ne.a,null,r.a.createElement("p",null,"sign up on ",r.a.createElement("a",{href:"https://social-network.samuraijs.com/"},"samuraiJS")),r.a.createElement("p",null,"or use the default credentials")),r.a.createElement(_e.a,null,r.a.createElement(oe.a,Object.assign({label:"Email",margin:"normal",type:"email"},t.getFieldProps("email"),{error:Boolean(t.errors.email),helperText:t.errors.email})),r.a.createElement(oe.a,Object.assign({label:"Password",margin:"normal",type:t.values.password?"password":""},t.getFieldProps("password"),{error:Boolean(t.errors.password),helperText:t.errors.password})),r.a.createElement(Re.a,{control:r.a.createElement(je.a,Object.assign({},t.getFieldProps("rememberMe"),{checked:t.values.rememberMe})),label:"remember me"}),r.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary",disabled:Boolean(t.errors.password)||Boolean(t.errors.email)},"Login"))))))},Ke=function(e){return e.app.appStatus},xe=function(e){var t=e.demo,a=void 0!==t&&t,n=Object(u.c)(Ke),c=Object(u.b)();Object(o.useEffect)((function(){a||c((function(e){e(H("loading")),w().then((function(t){e({type:"SET-LISTS",payload:{lists:t.data}}),e(H("succeeded"))})).catch((function(t){K(t,e)}))}))}),[c,a]);var i="loading"===n;return r.a.createElement("div",null,r.a.createElement(Pe,null),r.a.createElement(m.a,{position:"static"},r.a.createElement(O.a,{style:{justifyContent:"space-between"}},r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(v.a,null)),r.a.createElement(j.a,{variant:"h6"},"Todolists"),r.a.createElement(f.a,{color:"inherit",variant:"outlined"},"Login")),i&&r.a.createElement(E.a,{color:"secondary"})),r.a.createElement(p.a,{fixed:!0},r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/",element:r.a.createElement(ke,{demo:a})}),r.a.createElement(g.a,{path:"/loginReducer",element:r.a.createElement(Ue,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(u.a,{store:Q},r.a.createElement(d.a,null,r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.d7ecd4d6.chunk.js.map